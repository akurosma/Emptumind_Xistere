#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"
#include "make_const_nonconst.h"
#include "levels/hmc/header.h"

/* Fast64 begin persistent block [scripts] */
/* Fast64 end persistent block [scripts] */

const LevelScript level_hmc_entry[] = {
	INIT_LEVEL(),
	LOAD_YAY0(0x07, _hmc_segment_7SegmentRomStart, _hmc_segment_7SegmentRomEnd), 
	LOAD_YAY0_TEXTURE(0x09, _cave_yay0SegmentRomStart, _cave_yay0SegmentRomEnd), 
	LOAD_YAY0(0x05, _group11_yay0SegmentRomStart, _group11_yay0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group11_geoSegmentRomStart, _group11_geoSegmentRomEnd), 
	LOAD_YAY0(0x06, _group17_yay0SegmentRomStart, _group17_yay0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group17_geoSegmentRomStart, _group17_geoSegmentRomEnd), 
	LOAD_YAY0(0x08, _common0_yay0SegmentRomStart, _common0_yay0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	LOAD_YAY0(0xa, _water_skybox_yay0SegmentRomStart, _water_skybox_yay0SegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_12), 
	JUMP_LINK(script_func_global_18), 
	LOAD_MODEL_FROM_GEO(MODEL_HMC_WOODEN_DOOR, wooden_door_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_HMC_METAL_DOOR, metal_door_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_HMC_HAZY_MAZE_DOOR, hazy_maze_door_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_HMC_METAL_PLATFORM, hmc_geo_0005A0), 
	LOAD_MODEL_FROM_GEO(MODEL_HMC_METAL_ARROW_PLATFORM, hmc_geo_0005B8), 
	LOAD_MODEL_FROM_GEO(MODEL_HMC_ELEVATOR_PLATFORM, hmc_geo_0005D0), 
	LOAD_MODEL_FROM_GEO(MODEL_HMC_ROLLING_ROCK, hmc_geo_000548), 
	LOAD_MODEL_FROM_GEO(MODEL_HMC_ROCK_PIECE, hmc_geo_000570), 
	LOAD_MODEL_FROM_GEO(MODEL_HMC_ROCK_SMALL_PIECE, hmc_geo_000588), 
	LOAD_MODEL_FROM_GEO(MODEL_HMC_RED_GRILLS, hmc_geo_000530), 
	/* Fast64 begin persistent block [level commands] */
	/* Fast64 end persistent block [level commands] */

	AREA(1, hmc_area_1),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF0, LEVEL_CASTLE_GROUNDS, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF1, LEVEL_CASTLE_GROUNDS, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x15, LEVEL_HMC, 0x01, 0x14, WARP_NO_CHECKPOINT),
		WARP_NODE(0x14, LEVEL_HMC, 0x01, 0x15, WARP_NO_CHECKPOINT),
		WARP_NODE(0x16, LEVEL_HMC, 0x01, 0x17, WARP_NO_CHECKPOINT),
		WARP_NODE(0x17, LEVEL_HMC, 0x01, 0x16, WARP_NO_CHECKPOINT),
		WARP_NODE(0x18, LEVEL_HMC, 0x01, 0x16, WARP_NO_CHECKPOINT),
		MARIO_POS(0x01, 180, -469, 600, 9667),
		OBJECT(MODEL_NONE, -469, 600, 9667, 0, 180, 0, 0x000A0000, bhvSpinAirborneWarp),
		OBJECT(MODEL_AMP, 12042, 2300, -8329, 0, 0, 0, 0x00000000, bhvHomingAmp),
		OBJECT(MODEL_AMP, 12042, 2300, -9729, 0, 0, 0, 0x00000000, bhvHomingAmp),
		OBJECT(MODEL_AMP, 10592, 900, -623, 0, 0, 0, 0x00000000, bhvHomingAmp),
		OBJECT(MODEL_AMP, 12042, 700, -9029, 0, 0, 0, 0x00000000, bhvHomingAmp),
		OBJECT(MODEL_AMP, -12000, 400, 1892, 0, 0, 0, 0x00000000, bhvCirclingAmp),
		OBJECT(MODEL_AMP, -12050, 1300, -2481, 0, 0, 0, (1 << 16), bhvCirclingAmp),
		OBJECT(MODEL_NONE, -8000, 2194, 13412, 0, 0, 0, (1 << 24), bhvSwitchBlock),
		OBJECT(MODEL_NONE, -4000, 1400, 13512, 0, 0, 0, (1 << 24), bhvSwitchBlock),
		OBJECT(MODEL_BLUE_COIN, -7939, 2000, 8750, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN_SWITCH, -6900, 1550, 11089, 0, 0, 0, (1 << 24) | (3 << 16), bhvBlueCoinSwitch),
		OBJECT(MODEL_BLUE_COIN, -9500, 2200, 11489, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -9500, 1400, 13512, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -6300, 1600, 13312, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -5100, 2200, 12250, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -4000, 1300, 13512, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -4000, 100, 12200, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -5100, 1500, 11050, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -5500, 200, 11150, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -6900, 1200, 10589, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -8000, 2600, 11131, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -6000, 2600, 8800, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -6000, 2600, 11131, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -9000, 200, 13012, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -9000, -150, 11489, 0, 0, 0, 0x00000000, bhvHiddenBlueCoin),
		OBJECT(MODEL_NONE, -4200, 2150, 8950, 0, 0, 0, (1 << 24), bhvSwitchBlockSwitch),
		OBJECT(MODEL_NONE, -4350, 50, 12400, 0, 0, 0, 0x00000000, bhvInitializeChangingWaterLevel),
		OBJECT(MODEL_CHUCKYA, 1700, 980, -7625, 0, 0, 0, 0x00000000, bhvChuckya),
		OBJECT(MODEL_CHUCKYA, 12042, 651, -7034, 0, 0, 0, 0x00000000, bhvChuckya),
		OBJECT(MODEL_CHUCKYA, 11813, 1601, -3352, 0, 0, 0, 0x00000000, bhvChuckya),
		OBJECT(MODEL_HMC_WOODEN_DOOR, 6955, 0, -13050, 0, 180, 0, (22 << 16), bhvDoorWarp),
		OBJECT(MODEL_HMC_WOODEN_DOOR, 6252, 0, -12232, 0, 45, 0, (23 << 16), bhvDoorWarp),
		OBJECT(MODEL_HMC_WOODEN_DOOR, 6322, 0, -12374, 0, 45, 0, (24 << 16), bhvDoorWarp),
		OBJECT(MODEL_BOWLING_BALL, 12042, 1550, -7729, 0, 0, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -250, 1609, -12283, 0, 0, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, 450, 1609, -12283, 0, 0, 0, 0x00000000, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -13000, 1200, -2481, 0, 0, 0, (0 << 16), bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -6710, 2600, 8650, 0, 0, 0, (1 << 8), bhvFlamethrower),
		OBJECT(MODEL_BOWLING_BALL, -7290, 2600, 8650, 0, 0, 0, (1 << 8), bhvFlamethrower),
		OBJECT(MODEL_NONE, 1700, 530, -9150, 0, 0, 0, (4 << 16) | (1 << 8), bhvFlamethrower),
		OBJECT(MODEL_NONE, -1464, 0, -1000, 0, 0, 0, (6 << 24) | (4 << 8) | (20), bhvFlashingBlock),
		OBJECT(MODEL_NONE, -1464, 0, -1800, 0, 0, 0, (6 << 24) | (3 << 8) | (20), bhvFlashingBlock),
		OBJECT(MODEL_NONE, 7096, 288, -12494, 0, 0, 0, (4 << 24), bhvHiddenStar),
		OBJECT(MODEL_NONE, -2444, 850, 9756, 0, 0, 0, 0x00000000, bhvHiddenStarTrigger),
		OBJECT(MODEL_NONE, -13000, 900, -2481, 0, 0, 0, 0x00000000, bhvHiddenStarTrigger),
		OBJECT(MODEL_NONE, 621, 535, -12283, 0, 0, 0, 0x00000000, bhvHiddenStarTrigger),
		OBJECT(MODEL_NONE, 11992, 1950, 727, 0, 0, 0, 0x00000000, bhvHiddenStarTrigger),
		OBJECT(MODEL_NONE, 7085, 125, -11727, 0, 0, 0, 0x00000000, bhvHiddenStarTrigger),
		OBJECT(MODEL_NONE, -6900, 1200, 10589, 0, 0, 0, 0x00000000, bhvSwitchBlock),
		OBJECT(MODEL_NONE, -7939, 1350, 8750, 0, 0, 0, 0x00000000, bhvSwitchBlock),
		OBJECT(MODEL_NONE, -9000, 200, 13012, 0, 0, 0, 0x00000000, bhvSwitchBlock),
		OBJECT(MODEL_NONE, -5100, 1350, 11050, 0, 0, 0, 0x00000000, bhvSwitchBlock),
		OBJECT(MODEL_NONE, -5500, 200, 11150, 0, 0, 0, 0x00000000, bhvSwitchBlock),
		OBJECT(MODEL_RED_COIN, 10592, 1950, 727, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_NONE, 12072, 1801, -9034, 0, 0, 0, (3 << 24), bhvHiddenRedCoinStar),
		OBJECT(MODEL_RED_COIN, 11992, 651, 127, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 12347, 1950, -2818, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 11357, 1950, -3808, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 11042, 450, -7379, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 12692, 600, -9029, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 11392, 600, -9029, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 12072, 2425, -9034, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_NONE, -6850, 50, 8920, 0, 0, 0, 0x00000000, bhvSwitchBlockSwitch),
		OBJECT(MODEL_RL_BOUNCE, 14000, 75, 7750, 0, 0, 0, (500 << 24) | (75 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -14000, 40, 7750, 0, 0, 0, (254 << 24) | (100 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -1875, 600, 8906, 0, 0, 0, (2 << 24) | (75 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -2812, 600, 8906, 0, 0, 0, (3 << 24) | (75 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, 5450, 550, 4750, 0, 0, 0, (40 << 24) | (100 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, 485, 1300, 5500, 0, 0, 0, (10 << 24) | (45 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -115, 1000, 5500, 0, 0, 0, (15 << 24) | (60 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -915, 1000, 5500, 0, 0, 0, (15 << 24) | (50 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -1815, 1000, 5500, 0, 0, 0, (50 << 24) | (60 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -3215, 1000, 5500, 0, 0, 0, (20 << 24) | (50 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -4015, 1000, 5500, 0, 0, 0, (30 << 24) | (70 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -5898, 800, 4320, 0, 0, 0, (45 << 24) | (110 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -7539, 1000, 3598, 0, 0, 0, (30 << 24) | (70 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -6909, 1200, 2888, 0, 0, 0, (30 << 24) | (70 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -6193, 1600, 2128, 0, 0, 0, (30 << 24) | (60 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -5136, 2100, 1154, 0, 0, 0, (65 << 24) | (40 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -3215, 1600, 1154, 0, 0, 0, (70 << 24) | (60 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -1215, 1600, 1154, 0, 0, 0, (75 << 24) | (85 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, 1285, 1600, 1154, 0, 0, 0, (100 << 24) | (85 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, 3950, 2600, 2154, 0, 0, 0, (75 << 24) | (80 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, 1285, 2800, 2154, 0, 0, 0, (100 << 24) | (90 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -2715, 3000, 2154, 0, 0, 0, (130 << 24) | (95 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, -6434, 4301, 3254, 0, 0, 0, (145 << 24) | (95 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_BOUNCE, 185, 4301, 3254, 0, 0, 0, (110 << 24) | (86 << 16), bhvRlBounce),
		OBJECT(MODEL_RL_LIFT, 10442, 100, 2877, 0, 0, 0, 0x00000000, bhvRlLift),
		OBJECT(MODEL_RL_LIFT, 10592, 1100, -1373, 0, 0, 0, 0x00000000, bhvRlLift),
		OBJECT(MODEL_RL_LIFT, 12042, 500, -9029, 0, 0, 0, 0x00000000, bhvRlLift),
		OBJECT(MODEL_RL_PILLAR, -10500, -500, 3946, 0, 0, 0, 0x00000000, bhvRlPillar),
		OBJECT(MODEL_RL_PILLAR, -12000, -300, 3946, 0, 0, 0, 0x00000000, bhvRlPillar),
		OBJECT(MODEL_RL_PILLAR, -13000, -500, 1492, 0, 0, 0, 0x00000000, bhvRlPillar),
		OBJECT(MODEL_RL_PILLAR, -12050, 21, -2481, 0, 23, 0, (1 << 8), bhvRlPillar),
		OBJECT(MODEL_RL_SWIMTUBE, -8005, 500, -8812, 0, 0, 0, (1 << 8), bhvRlSwimtube),
		OBJECT(MODEL_RL_SWING, -1500, 1280, -10452, 0, 0, 0, 0x00000000, bhvRlSwing),
		OBJECT(MODEL_RL_SWING, -1500, 1280, -9652, 0, 180, 0, 0x00000000, bhvRlSwing),
		OBJECT(MODEL_NONE, -10783, 1350, -10112, 0, 0, 0, (2 << 24), bhvThiTinyIslandTop),
		OBJECT(MODEL_NONE, -2444, 850, 9756, 0, 0, 0, 0x00000000, bhvRlSparkle),
		OBJECT(MODEL_NONE, -13000, 900, -2481, 0, 0, 0, 0x00000000, bhvRlSparkle),
		OBJECT(MODEL_NONE, 621, 535, -12283, 0, 0, 0, 0x00000000, bhvRlSparkle),
		OBJECT(MODEL_NONE, 11992, 1950, 727, 0, 0, 0, 0x00000000, bhvRlSparkle),
		OBJECT(MODEL_NONE, 7085, 125, -11727, 0, 0, 0, (1 << 8), bhvRlSparkle),
		OBJECT(MODEL_RL_SQUAREFLOATING, -5550, 50, 8920, 0, 0, 0, (1 << 24), bhvWdwSquareFloatingPlatform),
		OBJECT(MODEL_RL_SQUAREFLOATING, -9000, 50, 11489, 0, 0, 0, (1 << 24), bhvWdwSquareFloatingPlatform),
		OBJECT(MODEL_RL_SQUAREFLOATING, -5100, 50, 12700, 0, 0, 0, (1 << 24), bhvWdwSquareFloatingPlatform),
		OBJECT(MODEL_RL_SQUAREFLOATING, -7500, 50, 13500, 0, 0, 0, (1 << 24), bhvWdwSquareFloatingPlatform),
		OBJECT(MODEL_STAR, 5285, 4651, 3254, 0, 0, 0, 0x00000000, bhvStar),
		OBJECT(MODEL_STAR, -11419, 2275, 589, 0, 0, 0, (1 << 24), bhvStar),
		OBJECT(MODEL_NONE, -569, 250, 3500, 0, 0, 0, (20 << 16), bhvWarp),
		OBJECT(MODEL_NONE, 6630, 650, 3503, 0, -90, 0, (21 << 16), bhvWarp),
		OBJECT(MODEL_STAR, -5600, 100, 12250, 0, 90, 0, (0 << 24) | (0 << 8) | (0), bhvWaterLevelDiamond),
		OBJECT(MODEL_STAR, -7750, 1600, 11939, 0, 90, 0, (0 << 24) | (0 << 8) | (0), bhvWaterLevelDiamond),
		TERRAIN(hmc_area_1_collision),
		ROOMS(hmc_area_1_collision_rooms),
		MACRO_OBJECTS(hmc_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_LEVEL_GRASS),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),
	FREE_LEVEL_POOL(),
	MARIO_POS(0x01, 180, -469, 600, 9667),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};